<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" type="text/css"
	href="../js/easyui/themes/default/easyui.css">
<link rel="stylesheet" type="text/css"
	href="../js/easyui/themes/icon.css">

<!-- 所有的JS插件都是依赖于JQuery,所以导入资源的时候,必须先导入jQuery -->
<script type="text/javascript" src="../js/jquery-1.8.3.js"></script>
<script type="text/javascript" src="../js/easyui/jquery.easyui.min.js"></script>
<link rel="stylesheet" href="../js/ztree/zTreeStyle.css" type="text/css">
<script type="text/javascript" src="../js/ztree/jquery.ztree.all-3.5.js"></script>

</head>
<script type="text/javascript">
	function addTabs() {
		//判断选项卡是否存在
		var result=$('#tt').tabs('exists','新选项卡面板');
		if(result){
			$('#tt').tabs('select','新选项卡面板');
		}else{
			// 添加一个未选中状态的选项卡面板
			$('#tt').tabs('add',{
				title: '新选项卡面板',
			});
		}
	}
	
	var setting = {
			data: {
				simpleData: {
					enable: true,
					idKey: "id",
					pIdKey: "pId",
					rootPId: 0
				}
			},
			callback: {
				onClick: function name(event, treeId, treeNode) {
					//alert(treeNode.pId);
					if(treeNode.pId!=0){
						//判断选项卡是否存在
						var result=$('#tt').tabs('exists',treeNode.name);
						if(result){
							$('#tt').tabs('select',treeNode.name);
						}else{
							// 添加一个未选中状态的选项卡面板
							$('#tt').tabs('add',{
								title: treeNode.name,
								selected:true,
								closable:true,    
								content:'<iframe width="100%" height="100%" frameborder="0" src="../'+treeNode.page+'"></iframe>'
							});
						}	
					}
					
				}
			}
	};
	$.getJSON("../data/menu.json",function(data){
		/*	参数一：节点的id
			参数二：ztree的配置参数
			参数三：具体的树的json类型的数据*/
		$.fn.zTree.init($("#treeDemo"), setting, data);
	},"json")
	
	
</script>
<body>

	<div class="easyui-layout" data-options="fit:true">
		<div data-options="region:'north'" style="height: 50px"></div>
		<div data-options="region:'south',split:true" style="height: 50px;"></div>

		<div data-options="region:'west',split:true" title="菜单栏"
			style="width: 200px;">
			<div class="easyui-accordion" data-options="fit:true">

				<div title="About" data-options="iconCls:'icon-ok'"
					style="overflow: auto; padding: 10px;">
					<a id="btn" href="#" class="easyui-linkbutton" data-options="iconCls:'icon-search'" onclick="addTabs()">添加选项卡</a> 
				</div>
				<div title="Help" data-options="iconCls:'icon-help',selected:true">
				<ul id="treeDemo" class="ztree"></ul>
				</div>
				<div title="TreeMenu" data-options="iconCls:'icon-search'"></div>
			</div>
		</div>
		<div data-options="region:'center',title:'主界面',iconCls:'icon-search',fit:true">
			<div id="tt" class="easyui-tabs" data-options="fit:true">
				<!-- <div title="Tab1" style="padding: 20px; display: none;">tab11</div>
				<div title="Tab2" data-options="closable:true"
					style="overflow: auto; padding: 20px; display: none;">tab2</div>
				<div title="Tab3" data-options="iconCls:'icon-reload',closable:true"
					style="padding: 20px; display: none;">tab3</div> -->
			</div>


		</div>
	</div>
</body>
</html>